<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Partials</title>
  <link rel="stylesheet" href="/bootstrap-5.3.3-dist/css/bootstrap.min.css">
  <style>
        .dropdown-menu {
            display: none;
            z-index: 10000;
        }
        .dropdown-menu.show {
            display: block;
            z-index: 100;
        }
        #header{
          z-index: 100;
        }
        #navbarNav{
          z-index: 11;
        }
  </style>
</head>
<body>

<div th:fragment="header" id="header">

  <nav class="navbar navbar-expand-lg navbar-dark bg-black" style="z-index: 11;">
    <div th:if="${#authorization.expression('isAuthenticated()')}">
    <a class="navbar-brand" href="#" th:text="${#authentication.principal.name} +', Welcome to Jackson Generation'"></a>
    </div>
    <div th:if="${#authorization.expression('isAnonymous()')}">
      <a class="navbar-brand" href="#">Guest, Welcome to Jackson Generation</a>
    </div>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/pid-view">LOTOs</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/table-view">Tables</a>
        </li>
        <!-- <li> -->
          <!-- <div class="col-md-3">
            <div class="dropdown">
                <button id="dropdown-button" class="btn btn-warning" onclick="dropdownAction()" type="button" data-toggle="dropdown" aria-expanded="false">
                    Tables
                </button>
                <div class="dropdown-menu" id="table-dropdown"></div>
            </div>
        </div> -->
        <!-- <select name="tables" id="table-dropdown">
          <option value="loto-points"><a href="/point/">Loto Points</a></option>
          <option value="old-loto-points"><a href="/point/">Old LOTO Points</a></option>
          <option value="old-loto-points"><a href="/point/"></a>Revised LOTO Points</option>
        </select> -->
        <!-- </li>
        <li class="nav-item">
          <a class="nav-link" href="/safe_work/">SWrx</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/tickets/">Work Tickets</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/admin/">Admin</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/dev">Dev</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/ex">Test</a>
        </li> -->
        <li class="nav-item">
          <div th:if="${#authorization.expression('isAuthenticated()')}">
            <form th:action="@{/logout}" method="post">
              <input class="nav-link" type="submit" value="Sign Out"/>
            </form>
          </div>
          <div th:if="${#authorization.expression('isAnonymous()')}">
            <a class="nav-link" href="/login">Login</a>
          </div>
      </ul>
    </div>
  </nav>

  <script src="/bootstrap-5.3.3-dist/js/bootstrap.min.js"></script>
  <script src="/functions/controllers/TransferDataController.js"></script>
  <script>

    const tableDropdown = document.getElementById('table-dropdown');
    const dropdownButton = document.getElementById("dropdown-button");

    function dropdownAction(){
        var menu = document.querySelector('.dropdown-menu');
        menu.classList.toggle('show');
        if(menu.children.length===0)buildTableDropdown();
    }

    async function buildTableDropdown(){
      console.log("dropdown building")
      let items = await getTypesOfTransferedData();
      items.forEach(e=>{
        let a = document.createElement('a');
        a.textContent = e;
        //a.value = e.replace(/ /g,"");
        a.classList.add('dropdown-item');
        a.href = '/point/' + e.replace(/ /g, "");
        tableDropdown.appendChild(a);
      })
    }

    // dropdownButton.addEventListener('click', ()=>{
    //   dropdownAction 
    // })
    

</script>
</div>

<div th:fragment="side-menu" >
  <div class="row">
    <div class="col-md-12">
      <button>Show New Uploads</button>
    </div>
  </div>
  <div class="row">
    <div class="col-md-12">
      <ul></ul>
    </div>
  </div>



</div>
</body>
</html>
<!DOCTYPE html>
<html lang="en" xmlns:th="<http://www.thymeleaf.org>" xmlns="http://www.w3.org/1999/html">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <title>My Main Layout</title>

    <link rel="stylesheet" href="/bootstrap-5.3.3-dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/my_styles/page.css">
    <link rel="stylesheet" href="/my_styles/picture.css">
    <link rel="stylesheet" href="/my_styles/menu.css">
    <link rel="stylesheet" href="/my_styles/util.css">
    <link rel="stylesheet" href="/my_styles/floating-menu.css">
    <style>
.areaHighlights{
    border: 2px solid blue !important;
    z-index: 300;
}
    </style>
</head>
<body>

    <div id="all">

        <div id="upper">
            <div th:replace="~{partials/index::header}"></div>
        </div>

        <div id="middle">
            <button id="pin-menu">Menu</button>
            <div id="left">
                <div id="items">
<!--                    <ul>-->
<!--                        <li th:each="file:${files}">-->
<!--                            <a th:href="@{/file/display/{id}(id=${file.id})}" th:text="${file.fileNumber}"></a>-->
<!--                            <a th:href="@{/file/edit/{id}(id=${file.id})}">Edit</a>-->
<!--                            <button class="delete-buttons" th:id="${file.id}">delete</button>-->
<!--                        </li>-->
<!--                    </ul>-->
                    <ul>
                        <li th:each="group : ${sortingGroups}">
                            <a class="btn btn-warning dropdownDk" th:text="${group.getValue()}" th:id="${group}" name="subgroups"></a>
                        </li>
                    </ul>
                </div>
                <div id="menu-resize"></div>
            </div>
            <div id="right">
<!--                <iframe src="/data/displayPdf" width="100%" height="600px"></iframe>-->
                <div id="picture-container" class="view">
                    <img src="1.jpg" usemap="#image_map" id="picture">
                    <!-- <img src="/data/displayJpg" usemap="#image_map" id="picture"> -->
                    <map name="image_map" id="map"></map>
                </div>
            </div>
        </div>

        <div id="lower" class="container-fluid">
            <div class="row">
                <div class="col-12">
                    <ul >
                        <li class="btn-list-in-line" id="fileUploadButton">Upload Files</li>
                        <li class="btn-list-in-line" onclick="showNewUploads()">Edit New Uploads</li>
                        <li class="btn-list-in-line"><a href="/file/upload">upload</a></li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div id="formContainer">

                    </div>
                </div>
            </div>
        </div>



        <div id="floatingMenu">
            <div id="bar"></div>
            <!-- <p id="equipmentId"></p> -->
            <input type="text" id="equipmentId">
            <img src="/cutImage.jpg" id="cutimage">
            <div id="controls">
                <select name="type" id="one" class="dropdown textSize" onchange="setEquipmentType(this.value)">
                    <option value="line">Line</option>
                    <option value="manualValve">manualValve</option>
                    <option value="instrument">instrument</option>
                    <option value="connector">connector</option>
                    <option value="AOV">AOV</option>
                    <option value="MOV">MOV</option>
                    <option value="SOV">SOV</option>
                    <option value="airSupply">airSupply</option>
                </select>

                <button id="confirm" class="textSize" onclick="updateAndConfirm()">+</button>
                <button id="remove" class="textSize" onclick="removeLastHighlite()">-</button>
            </div>
        </div>
    </div>
    <div id="popup" class="ignoreDk" style="z-index:1060;"></div>

    <script src="/bootstrap-5.3.3-dist/js/bootstrap.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script src="/functions/dev_functions/Page.js"></script>
    <script src="/functions/dev_functions/Picture.js"></script>
    <script src="/functions/dev_functions/Editing.js"></script>
    <script src="/functions/dev_functions/Http.js"></script>
    <script src="/functions/FileFunctions.js"></script>
    <script src="/functions/display_functions/PopUpForGroups.js"></script>
    <script src="/functions/display_functions/PopUpForHtml.js"></script>
    <script src="/functions/display_functions/DisplayPicture.js"></script>
    <script src="/functions/display_functions/FileDropdown.js"></script>


    <script>
        $(document).ready(function() {
            $('#fileUploadButton').click(function() {
                console.log("executing")
                $.get('/file/upload', function(data) {
                    $('#formContainer').html(data);
                });
            });

            $('#loadProductFormButton').click(function() {
                $.get('/path/to/productForm', function(data) {
                    $('#formContainer').html(data);
                });
            });
        });

window.onload = function() {
    let buttons = document.getElementsByClassName('delete-buttons');
    for (let i = 0; i < buttons.length; i++) {
        buttons[i].addEventListener('click', function() {
            console.log('deleting', buttons[i].getAttribute('id'));
            postRequest('/file/delete/' + buttons[i].getAttribute("id"));
        });
    }
    console.log("window is loaded");
    openDropdown();
    // var img = document.getElementById('picture');
    // var timestamp = new Date().getTime();
    // img.src = "1.jpg?" + timestamp;
};




    </script>

</body>
</html>